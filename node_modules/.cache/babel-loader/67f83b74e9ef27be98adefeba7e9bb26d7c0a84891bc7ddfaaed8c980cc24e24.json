{"ast":null,"code":"import React,{useState,useMemo}from'react';import{useParams,Link}from'react-router-dom';import'../assets/Category.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PRODUCTS_PER_PAGE=12;// сколько товаров показывать за один раз\nconst BASE_URL=process.env.REACT_APP_API_URL;const Category=_ref=>{let{categories,products}=_ref;const{id}=useParams();const[searchQuery,setSearchQuery]=useState('');const[visibleCount,setVisibleCount]=useState(PRODUCTS_PER_PAGE);const category=categories.find(c=>c.id===parseInt(id));const categoryProducts=products.filter(p=>p.categoryId===parseInt(id));// Фильтрация товаров по поисковому запросу\nconst filteredProducts=useMemo(()=>{if(!searchQuery.trim()){return categoryProducts;}const query=searchQuery.toLowerCase().trim();return categoryProducts.filter(product=>product.name.toLowerCase().includes(query)||product.description.toLowerCase().includes(query));},[categoryProducts,searchQuery]);// Товары, которые сейчас видим (с учётом lazy load)\nconst visibleProducts=filteredProducts.slice(0,visibleCount);const handleLoadMore=()=>{setVisibleCount(prev=>prev+PRODUCTS_PER_PAGE);};if(!category){return/*#__PURE__*/_jsx(\"div\",{children:\"Category not found\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"category-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"category-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:category.name}),/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search in Category \\\"\".concat(category.name,\"\\\"...\"),value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);setVisibleCount(PRODUCTS_PER_PAGE);// сброс видимых товаров при поиске\n},className:\"category-search\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Found products: \",filteredProducts.length,\" out of \",categoryProducts.length]})]}),categoryProducts.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-products\",children:/*#__PURE__*/_jsx(\"p\",{children:\"There are no products in this category yet\"})}):filteredProducts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-products\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"For the query \\\"\",searchQuery,\"\\\" nothing found\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Try changing the search query\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:visibleProducts.map(product=>/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(product.id),className:\"product-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image\",children:product.images&&product.images.length>0?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(BASE_URL).concat(product.images[0]),alt:product.name}):'📦'}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[product.price,\" \\u20BC\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-description\",children:[product.description.substring(0,100),\"...\"]})]})]},product.id))}),visibleCount<filteredProducts.length&&/*#__PURE__*/_jsx(\"div\",{className:\"load-more-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"load-more-btn\",onClick:handleLoadMore,children:\"Load More\"})})]})]});};export default Category;","map":{"version":3,"names":["React","useState","useMemo","useParams","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PRODUCTS_PER_PAGE","BASE_URL","process","env","REACT_APP_API_URL","Category","_ref","categories","products","id","searchQuery","setSearchQuery","visibleCount","setVisibleCount","category","find","c","parseInt","categoryProducts","filter","p","categoryId","filteredProducts","trim","query","toLowerCase","product","name","includes","description","visibleProducts","slice","handleLoadMore","prev","children","className","type","placeholder","concat","value","onChange","e","target","length","map","to","images","src","alt","price","substring","onClick"],"sources":["C:/Users/user/Desktop/Beta/src/components/Category.jsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport '../assets/Category.css';\r\n\r\nconst PRODUCTS_PER_PAGE = 12; // сколько товаров показывать за один раз\r\nconst BASE_URL = process.env.REACT_APP_API_URL;\r\n\r\nconst Category = ({ categories, products }) => {\r\n  const { id } = useParams();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [visibleCount, setVisibleCount] = useState(PRODUCTS_PER_PAGE);\r\n\r\n  const category = categories.find(c => c.id === parseInt(id));\r\n  const categoryProducts = products.filter(p => p.categoryId === parseInt(id));\r\n\r\n  // Фильтрация товаров по поисковому запросу\r\n  const filteredProducts = useMemo(() => {\r\n    if (!searchQuery.trim()) {\r\n      return categoryProducts;\r\n    }\r\n    \r\n    const query = searchQuery.toLowerCase().trim();\r\n    return categoryProducts.filter(product => \r\n      product.name.toLowerCase().includes(query) ||\r\n      product.description.toLowerCase().includes(query)\r\n    );\r\n  }, [categoryProducts, searchQuery]);\r\n\r\n  // Товары, которые сейчас видим (с учётом lazy load)\r\n  const visibleProducts = filteredProducts.slice(0, visibleCount);\r\n\r\n  const handleLoadMore = () => {\r\n    setVisibleCount(prev => prev + PRODUCTS_PER_PAGE);\r\n  };\r\n\r\n  if (!category) {\r\n    return <div>Category not found</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"category-page\">\r\n      <div className=\"category-header\">\r\n        <h1>{category.name}</h1>\r\n        <div className=\"search-container\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder={`Search in Category \"${category.name}\"...`}\r\n            value={searchQuery}\r\n            onChange={(e) => {\r\n              setSearchQuery(e.target.value);\r\n              setVisibleCount(PRODUCTS_PER_PAGE); // сброс видимых товаров при поиске\r\n            }}\r\n            className=\"category-search\"\r\n          />\r\n        </div>\r\n        <p>Found products: {filteredProducts.length} out of {categoryProducts.length}</p>\r\n      </div>\r\n      \r\n      {categoryProducts.length === 0 ? (\r\n        <div className=\"no-products\">\r\n          <p>There are no products in this category yet</p>\r\n        </div>\r\n      ) : filteredProducts.length === 0 ? (\r\n        <div className=\"no-products\">\r\n          <p>For the query \"{searchQuery}\" nothing found</p>\r\n          <p>Try changing the search query</p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"products-grid\">\r\n            {visibleProducts.map(product => (\r\n              <Link \r\n                key={product.id} \r\n                to={`/product/${product.id}`} \r\n                className=\"product-card\"\r\n              >\r\n                <div className=\"product-image\">\r\n                  {product.images && product.images.length > 0 ? (\r\n                    <img \r\n                      src={`${BASE_URL}${product.images[0]}`} \r\n                      alt={product.name} \r\n                    />\r\n                  ) : (\r\n                    '📦'\r\n                  )}\r\n                </div>\r\n                <div className=\"product-info\">\r\n                  <h3 className=\"product-name\">{product.name}</h3>\r\n                  <div className=\"product-price\">{product.price} ₼</div>\r\n                  <p className=\"product-description\">\r\n                    {product.description.substring(0, 100)}...\r\n                  </p>\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n\r\n          {visibleCount < filteredProducts.length && (\r\n            <div className=\"load-more-container\">\r\n              <button className=\"load-more-btn\" onClick={handleLoadMore}>\r\n                Load More\r\n              </button>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Category;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,OAAO,KAAQ,OAAO,CAChD,OAASC,SAAS,CAAEC,IAAI,KAAQ,kBAAkB,CAClD,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEhC,KAAM,CAAAC,iBAAiB,CAAG,EAAE,CAAE;AAC9B,KAAM,CAAAC,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAE9C,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAA8B,IAA7B,CAAEC,UAAU,CAAEC,QAAS,CAAC,CAAAF,IAAA,CACxC,KAAM,CAAEG,EAAG,CAAC,CAAGjB,SAAS,CAAC,CAAC,CAC1B,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACsB,YAAY,CAAEC,eAAe,CAAC,CAAGvB,QAAQ,CAACU,iBAAiB,CAAC,CAEnE,KAAM,CAAAc,QAAQ,CAAGP,UAAU,CAACQ,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACP,EAAE,GAAKQ,QAAQ,CAACR,EAAE,CAAC,CAAC,CAC5D,KAAM,CAAAS,gBAAgB,CAAGV,QAAQ,CAACW,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACC,UAAU,GAAKJ,QAAQ,CAACR,EAAE,CAAC,CAAC,CAE5E;AACA,KAAM,CAAAa,gBAAgB,CAAG/B,OAAO,CAAC,IAAM,CACrC,GAAI,CAACmB,WAAW,CAACa,IAAI,CAAC,CAAC,CAAE,CACvB,MAAO,CAAAL,gBAAgB,CACzB,CAEA,KAAM,CAAAM,KAAK,CAAGd,WAAW,CAACe,WAAW,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CAC9C,MAAO,CAAAL,gBAAgB,CAACC,MAAM,CAACO,OAAO,EACpCA,OAAO,CAACC,IAAI,CAACF,WAAW,CAAC,CAAC,CAACG,QAAQ,CAACJ,KAAK,CAAC,EAC1CE,OAAO,CAACG,WAAW,CAACJ,WAAW,CAAC,CAAC,CAACG,QAAQ,CAACJ,KAAK,CAClD,CAAC,CACH,CAAC,CAAE,CAACN,gBAAgB,CAAER,WAAW,CAAC,CAAC,CAEnC;AACA,KAAM,CAAAoB,eAAe,CAAGR,gBAAgB,CAACS,KAAK,CAAC,CAAC,CAAEnB,YAAY,CAAC,CAE/D,KAAM,CAAAoB,cAAc,CAAGA,CAAA,GAAM,CAC3BnB,eAAe,CAACoB,IAAI,EAAIA,IAAI,CAAGjC,iBAAiB,CAAC,CACnD,CAAC,CAED,GAAI,CAACc,QAAQ,CAAE,CACb,mBAAOnB,IAAA,QAAAuC,QAAA,CAAK,oBAAkB,CAAK,CAAC,CACtC,CAEA,mBACErC,KAAA,QAAKsC,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5BrC,KAAA,QAAKsC,SAAS,CAAC,iBAAiB,CAAAD,QAAA,eAC9BvC,IAAA,OAAAuC,QAAA,CAAKpB,QAAQ,CAACa,IAAI,CAAK,CAAC,cACxBhC,IAAA,QAAKwC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cAC/BvC,IAAA,UACEyC,IAAI,CAAC,MAAM,CACXC,WAAW,yBAAAC,MAAA,CAAyBxB,QAAQ,CAACa,IAAI,SAAO,CACxDY,KAAK,CAAE7B,WAAY,CACnB8B,QAAQ,CAAGC,CAAC,EAAK,CACf9B,cAAc,CAAC8B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAC9B1B,eAAe,CAACb,iBAAiB,CAAC,CAAE;AACtC,CAAE,CACFmC,SAAS,CAAC,iBAAiB,CAC5B,CAAC,CACC,CAAC,cACNtC,KAAA,MAAAqC,QAAA,EAAG,kBAAgB,CAACZ,gBAAgB,CAACqB,MAAM,CAAC,UAAQ,CAACzB,gBAAgB,CAACyB,MAAM,EAAI,CAAC,EAC9E,CAAC,CAELzB,gBAAgB,CAACyB,MAAM,GAAK,CAAC,cAC5BhD,IAAA,QAAKwC,SAAS,CAAC,aAAa,CAAAD,QAAA,cAC1BvC,IAAA,MAAAuC,QAAA,CAAG,4CAA0C,CAAG,CAAC,CAC9C,CAAC,CACJZ,gBAAgB,CAACqB,MAAM,GAAK,CAAC,cAC/B9C,KAAA,QAAKsC,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1BrC,KAAA,MAAAqC,QAAA,EAAG,kBAAe,CAACxB,WAAW,CAAC,kBAAe,EAAG,CAAC,cAClDf,IAAA,MAAAuC,QAAA,CAAG,+BAA6B,CAAG,CAAC,EACjC,CAAC,cAENrC,KAAA,CAAAE,SAAA,EAAAmC,QAAA,eACEvC,IAAA,QAAKwC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAC3BJ,eAAe,CAACc,GAAG,CAAClB,OAAO,eAC1B7B,KAAA,CAACJ,IAAI,EAEHoD,EAAE,aAAAP,MAAA,CAAcZ,OAAO,CAACjB,EAAE,CAAG,CAC7B0B,SAAS,CAAC,cAAc,CAAAD,QAAA,eAExBvC,IAAA,QAAKwC,SAAS,CAAC,eAAe,CAAAD,QAAA,CAC3BR,OAAO,CAACoB,MAAM,EAAIpB,OAAO,CAACoB,MAAM,CAACH,MAAM,CAAG,CAAC,cAC1ChD,IAAA,QACEoD,GAAG,IAAAT,MAAA,CAAKrC,QAAQ,EAAAqC,MAAA,CAAGZ,OAAO,CAACoB,MAAM,CAAC,CAAC,CAAC,CAAG,CACvCE,GAAG,CAAEtB,OAAO,CAACC,IAAK,CACnB,CAAC,CAEF,IACD,CACE,CAAC,cACN9B,KAAA,QAAKsC,SAAS,CAAC,cAAc,CAAAD,QAAA,eAC3BvC,IAAA,OAAIwC,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAER,OAAO,CAACC,IAAI,CAAK,CAAC,cAChD9B,KAAA,QAAKsC,SAAS,CAAC,eAAe,CAAAD,QAAA,EAAER,OAAO,CAACuB,KAAK,CAAC,SAAE,EAAK,CAAC,cACtDpD,KAAA,MAAGsC,SAAS,CAAC,qBAAqB,CAAAD,QAAA,EAC/BR,OAAO,CAACG,WAAW,CAACqB,SAAS,CAAC,CAAC,CAAE,GAAG,CAAC,CAAC,KACzC,EAAG,CAAC,EACD,CAAC,GApBDxB,OAAO,CAACjB,EAqBT,CACP,CAAC,CACC,CAAC,CAELG,YAAY,CAAGU,gBAAgB,CAACqB,MAAM,eACrChD,IAAA,QAAKwC,SAAS,CAAC,qBAAqB,CAAAD,QAAA,cAClCvC,IAAA,WAAQwC,SAAS,CAAC,eAAe,CAACgB,OAAO,CAAEnB,cAAe,CAAAE,QAAA,CAAC,WAE3D,CAAQ,CAAC,CACN,CACN,EACD,CACH,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}