{"ast":null,"code":"import React,{useState,useMemo}from'react';import{useParams,Link}from'react-router-dom';import'../assets/Category.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PRODUCTS_PER_PAGE=12;// сколько товаров показывать за один раз\nconst Category=_ref=>{let{categories,products}=_ref;const{id}=useParams();const[searchQuery,setSearchQuery]=useState('');const[visibleCount,setVisibleCount]=useState(PRODUCTS_PER_PAGE);const category=categories.find(c=>c.id===parseInt(id));const categoryProducts=products.filter(p=>p.categoryId===parseInt(id));// Фильтрация товаров по поисковому запросу\nconst filteredProducts=useMemo(()=>{if(!searchQuery.trim()){return categoryProducts;}const query=searchQuery.toLowerCase().trim();return categoryProducts.filter(product=>product.name.toLowerCase().includes(query)||product.description.toLowerCase().includes(query));},[categoryProducts,searchQuery]);// Товары, которые сейчас видим (с учётом lazy load)\nconst visibleProducts=filteredProducts.slice(0,visibleCount);const handleLoadMore=()=>{setVisibleCount(prev=>prev+PRODUCTS_PER_PAGE);};if(!category){return/*#__PURE__*/_jsx(\"div\",{children:\"Category not found\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"category-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"category-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:category.name}),/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search in Category \\\"\".concat(category.name,\"\\\"...\"),value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);setVisibleCount(PRODUCTS_PER_PAGE);// сброс видимых товаров при поиске\n},className:\"category-search\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Found products: \",filteredProducts.length,\" out of \",categoryProducts.length]})]}),categoryProducts.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-products\",children:/*#__PURE__*/_jsx(\"p\",{children:\"There are no products in this category yet\"})}):filteredProducts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-products\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"For the query \\\"\",searchQuery,\"\\\" nothing found\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Try changing the search query\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:visibleProducts.map(product=>/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(product.id),className:\"product-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image\",children:product.images&&product.images.length>0?/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000\".concat(product.images[0]),alt:product.name}):'📦'}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[product.price,\" \\u20BC\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-description\",children:[product.description.substring(0,100),\"...\"]})]})]},product.id))}),visibleCount<filteredProducts.length&&/*#__PURE__*/_jsx(\"div\",{className:\"load-more-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"load-more-btn\",onClick:handleLoadMore,children:\"Load More\"})})]})]});};export default Category;","map":{"version":3,"names":["React","useState","useMemo","useParams","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PRODUCTS_PER_PAGE","Category","_ref","categories","products","id","searchQuery","setSearchQuery","visibleCount","setVisibleCount","category","find","c","parseInt","categoryProducts","filter","p","categoryId","filteredProducts","trim","query","toLowerCase","product","name","includes","description","visibleProducts","slice","handleLoadMore","prev","children","className","type","placeholder","concat","value","onChange","e","target","length","map","to","images","src","alt","price","substring","onClick"],"sources":["C:/Users/user/Desktop/Beta/src/components/Category.jsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport '../assets/Category.css';\n\n\nconst PRODUCTS_PER_PAGE = 12; // сколько товаров показывать за один раз\n\nconst Category = ({ categories, products }) => {\n  const { id } = useParams();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [visibleCount, setVisibleCount] = useState(PRODUCTS_PER_PAGE);\n\n  const category = categories.find(c => c.id === parseInt(id));\n  const categoryProducts = products.filter(p => p.categoryId === parseInt(id));\n\n  // Фильтрация товаров по поисковому запросу\n  const filteredProducts = useMemo(() => {\n    if (!searchQuery.trim()) {\n      return categoryProducts;\n    }\n    \n    const query = searchQuery.toLowerCase().trim();\n    return categoryProducts.filter(product => \n      product.name.toLowerCase().includes(query) ||\n      product.description.toLowerCase().includes(query)\n    );\n  }, [categoryProducts, searchQuery]);\n\n  // Товары, которые сейчас видим (с учётом lazy load)\n  const visibleProducts = filteredProducts.slice(0, visibleCount);\n\n  const handleLoadMore = () => {\n    setVisibleCount(prev => prev + PRODUCTS_PER_PAGE);\n  };\n\n  if (!category) {\n    return <div>Category not found</div>;\n  }\n\n  return (\n    <div className=\"category-page\">\n      <div className=\"category-header\">\n        <h1>{category.name}</h1>\n        <div className=\"search-container\">\n          <input\n            type=\"text\"\n            placeholder={`Search in Category \"${category.name}\"...`}\n            value={searchQuery}\n            onChange={(e) => {\n              setSearchQuery(e.target.value);\n              setVisibleCount(PRODUCTS_PER_PAGE); // сброс видимых товаров при поиске\n            }}\n            className=\"category-search\"\n          />\n        </div>\n        <p>Found products: {filteredProducts.length} out of {categoryProducts.length}</p>\n      </div>\n      \n      {categoryProducts.length === 0 ? (\n        <div className=\"no-products\">\n          <p>There are no products in this category yet</p>\n        </div>\n      ) : filteredProducts.length === 0 ? (\n        <div className=\"no-products\">\n          <p>For the query \"{searchQuery}\" nothing found</p>\n          <p>Try changing the search query</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"products-grid\">\n            {visibleProducts.map(product => (\n              <Link \n                key={product.id} \n                to={`/product/${product.id}`} \n                className=\"product-card\"\n              >\n                <div className=\"product-image\">\n                  {product.images && product.images.length > 0 ? (\n                    <img \n                      src={`http://localhost:5000${product.images[0]}`} \n                      alt={product.name} \n                    />\n                  ) : (\n                    '📦'\n                  )}\n                </div>\n                <div className=\"product-info\">\n                  <h3 className=\"product-name\">{product.name}</h3>\n                  <div className=\"product-price\">{product.price} ₼</div>\n                  <p className=\"product-description\">\n                    {product.description.substring(0, 100)}...\n                  </p>\n                </div>\n              </Link>\n            ))}\n          </div>\n\n          {visibleCount < filteredProducts.length && (\n            <div className=\"load-more-container\">\n              <button className=\"load-more-btn\" onClick={handleLoadMore}>\n                Load More\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Category;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}